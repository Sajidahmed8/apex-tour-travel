var express=require('express');
var app=express();
//var obj=require('./credentials');

var fs=require('fs');//BUILT-IN

//DB
var dbConnect=undefined;
var oracledb = require('oracledb'); //INSTALL
oracledb.getConnection(
  {
    user          : 'APEX',
    password      : 'nadeem',
    connectString : "localhost/XE"
  },
  function(err, connection)
  {
    if (err) { console.error(err); return; }
    dbConnect=connection;
  )};

app.post('/sign',function(req,res){
  if(dbConnect){    dbConnect.execute(
        "INSERT INTO nad VALUES(:id,:name)",
        {id:'1',name:'Nadeem'},
        { autoCommit: true},
        function(err)
        {
          if (err) { console.error(err); return; }
          //res.send(result.rows[0][1]);
          res.send('DATA IS INSERTED');
        });
  }
  else{
    console.log('DB not connected');
  }
})

app.listen(9001,function(){
  console.log('Running')
})